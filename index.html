<!doctype html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en">

<head>
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>CENIC 2015 Program</title>
	<link rel="stylesheet" href="bower_components/foundation/css/normalize.css">
	<link rel="stylesheet" href="bower_components/foundation/css/foundation.css">
	<script src="bower_components/foundation/js/vendor/modernizr.js"></script>
</head>
<body>
	<header class="text-center"><h1>CENIC 2015 Program</h1></header>
	<div id="program">
		<div class="row">
			<div class="small-12 columns">
				<div class="panel">
					<progress style="width: 100%">Loading...</progres>
				</div>
			</div>
		</div>
	</div>
<script src="bower_components/foundation/js/vendor/jquery.js"></script>
<script src="bower_components/foundation/js/foundation.min.js"></script>
<script>
	$(document).foundation();
	$(document).ready(function () {
		var program = $('#program');
		var failure = function (err) {
			program.text('Bummer. Looks like something went wrong.');
			console.log(err);
		}

		$.ajax({
			url: './init.json',
			success: function (payload) { 
				var data = payload[0].data;
				if (! data) {
					return failure(new Error('Data was not defined'));
				}
				var entries = data.map(function (entry) {
					return $('<div class="panel">').text(entry.name);
				});
				var myProgram = entries.reduce(function (accumulator, entry) {
					return accumulator.append($('<div class="small-12 columns"></div>').append(entry));
				}, $('<div class="row">'));
				program.empty();
				program.append(myProgram);
			},
			failure: failure
		});
	});
</script>
</body>
</html>